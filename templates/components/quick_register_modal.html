<div
  class="modal fade"
  id="quickRegisterModal"
  tabindex="-1"
  aria-labelledby="quickRegisterModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="quickRegisterModalLabel">
          <i class="fas fa-user-plus me-2"></i>Đăng ký khuôn mặt nhanh
        </h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <form id="quickRegisterForm">
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="reg-student-id" class="form-label"
                  >Mã sinh viên <span class="text-danger">*</span></label
                >
                <input
                  type="text"
                  class="form-control"
                  id="reg-student-id"
                  name="student_id"
                  required
                  placeholder="Ví dụ: SV001"
                />
              </div>
              <div class="mb-3">
                <label for="reg-full-name" class="form-label"
                  >Họ và tên <span class="text-danger">*</span></label
                >
                <input
                  type="text"
                  class="form-control"
                  id="reg-full-name"
                  name="full_name"
                  required
                  placeholder="Ví dụ: Nguyễn Văn A"
                />
              </div>
              <div class="mb-3">
                <label for="reg-class-name" class="form-label">Lớp</label>
                <input
                  type="text"
                  class="form-control"
                  id="reg-class-name"
                  name="class_name"
                  list="quick-register-class-options"
                  placeholder="Chọn hoặc nhập tên lớp"
                />
                <datalist id="quick-register-class-options"></datalist>
                <div class="form-text">
                  Chọn từ danh sách lớp hiện có hoặc nhập tên lớp mới.
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label class="form-label"
                  >Ảnh khuôn mặt <span class="text-danger">*</span></label
                >
                <div class="text-center">
                  <video
                    id="webcam-preview"
                    class="border rounded mb-2 d-none"
                    width="100%"
                    height="240"
                    autoplay
                  ></video>
                  <canvas id="capture-canvas" class="d-none"></canvas>
                  <div
                    id="camera-placeholder"
                    class="border rounded d-flex align-items-center justify-content-center bg-light camera-placeholder-box"
                  >
                    <div>
                      <i class="fas fa-camera fa-3x text-muted mb-2"></i>
                      <p class="text-muted mb-0">
                        Cần tối thiểu 3 ảnh rõ nét cho mỗi sinh viên
                      </p>
                    </div>
                  </div>
                </div>
                <div id="captured-images-list" class="row g-2 mt-2"></div>
                <p id="capture-counter" class="form-text text-muted mt-2">
                  Cần ít nhất 3 ảnh khuôn mặt. Hãy chụp ở nhiều góc độ hoặc tải
                  lên cùng lúc.
                </p>
                <div class="d-grid gap-2 mt-2">
                  <button
                    type="button"
                    class="btn btn-outline-primary"
                    id="start-webcam-btn"
                  >
                    <i class="fas fa-video me-1"></i>Bật camera
                  </button>
                  <button
                    type="button"
                    class="btn btn-outline-secondary d-none"
                    id="stop-webcam-btn"
                  >
                    <i class="fas fa-video-slash me-1"></i>Tắt camera
                  </button>
                  <button
                    type="button"
                    class="btn btn-success d-none"
                    id="capture-btn"
                    disabled
                  >
                    <i class="fas fa-camera me-1"></i>Chụp & lưu ảnh
                  </button>
                  <button
                    type="button"
                    class="btn btn-outline-danger d-none"
                    id="retake-btn"
                  >
                    <i class="fas fa-trash me-1"></i>Xóa ảnh đã chụp
                  </button>
                  <div class="text-center">
                    <small class="text-muted">hoặc tải nhiều ảnh có sẵn</small>
                  </div>
                  <input
                    type="file"
                    class="form-control"
                    id="reg-face-images"
                    name="face_images"
                    accept="image/*"
                    multiple
                  />
                  <div class="form-text">
                    Giữ Ctrl/Shift để chọn nhiều ảnh khác nhau (ít nhất 3 ảnh).
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div id="register-result" class="mt-3"></div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          <i class="fas fa-times me-1"></i>Hủy
        </button>
        <button type="button" class="btn btn-primary" id="submit-register-btn">
          <i class="fas fa-save me-1"></i>Đăng ký
        </button>
      </div>
    </div>
  </div>
</div>
